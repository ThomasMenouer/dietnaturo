{% extends 'base.html.twig' %}

{% block title %}Publication Instagram{% endblock %}

{% block body %}
<div class="container my-5">

    {% if post.mediaType == 'CAROUSEL_ALBUM' and children is not empty %}
        <div id="carousel{{ post.id }}" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner rounded-4 overflow-hidden" style="max-height: 500px;">
                {% for child in children %}
                    <div class="carousel-item {% if loop.first %}active{% endif %}">
                        {% if child.media_type == 'VIDEO' %}
                            <video class="d-block w-100" style="max-height:500px; object-fit:cover;" controls controlslist="nodownload" oncontextmenu="return false;">
                                <source src="{{ child.media_url }}" type="video/mp4">
                            </video>
                        {% else %}
                            <img src="{{ child.media_url }}" class="d-block w-100 object-fit-cover" style="max-height:500px;" alt="Post Instagram">
                        {% endif %}
                    </div>
                {% endfor %}
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#carousel{{ post.id }}" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Précédent</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel{{ post.id }}" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Suivant</span>
            </button>
        </div>

    {% else %}
        {% if post.mediaType == 'IMAGE' %}
            <img src="{{ post.mediaUrl }}" class="w-100 rounded-4 object-fit-cover mb-3" style="max-height:500px;" alt="Post Instagram">
        {% elseif post.mediaType == 'VIDEO' %}
            <video class="w-100 rounded-4 mb-3" style="max-height:500px; object-fit:cover;" controls>
                <source src="{{ post.mediaUrl }}" type="video/mp4">
            </video>
        {% endif %}
    {% endif %}

    <div class="mt-3">
        {% if post.caption %}
            <p>{{ post.caption }}</p>
        {% endif %}
        <a href="{{ post.permalink }}" target="_blank" class="btn btn-custom-color text-white rounded-pill">
            Voir sur Instagram
        </a>
    </div>

</div>
{% endblock %}
